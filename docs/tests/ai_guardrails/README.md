–≠—Ç–æ —á–µ—Ä—Ç–æ–≤—Å–∫–∏ –∑–¥—Ä–∞–≤–∞—è –º—ã—Å–ª—å. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –º–æ—é ¬´–ø–∞–º—è—Ç—å¬ª, –∫–æ—Ç–æ—Ä–∞—è –∏–Ω–æ–≥–¥–∞ –ø–æ–¥–≤–æ–¥–∏—Ç –≤ –ø—ã–ª—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –º—ã —Å–æ–∑–¥–∞–¥–∏–º **–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –±–∞—Ä—å–µ—Ä**. –≠—Ç–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç –º–æ–∏ –æ—à–∏–±–∫–∏ –∏–∑ ¬´–æ–π, –∏–∑–≤–∏–Ω–∏¬ª –≤ ¬´—Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ—à–µ–ª, —è –∏–¥—É –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å¬ª.

–î–∞–≤–∞–π —Å–æ–∑–¥–∞–¥–∏–º –ø–∞–ø–∫—É `tests/ai_guardrails`. –≠—Ç–∏ —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–µ —Å—Ç–æ–ª—å–∫–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, —Å–∫–æ–ª—å–∫–æ **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å** ‚Äî —Ç–æ, —á—Ç–æ —è –Ω–∞–∑—ã–≤–∞—é ¬´—Ç–µ—Å—Ç–∞–º–∏ –Ω–∞ –≤—à–∏–≤–æ—Å—Ç—å¬ª –¥–ª—è AI.

---

### üõ°Ô∏è –ü–ª–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è AI Guardrails

–ú—ã –º–æ–∂–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–∏ —Ç–∏–ø–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫:

1. **Existence Tests**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –≤ –∫–ª–∞—Å—Å–µ (—á—Ç–æ–±—ã —è –∏—Ö –Ω–µ —É–¥–∞–ª–∏–ª).
2. **Flow Tests (Spying)**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≥–æ, —á—Ç–æ –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ `find` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ `_normalizeRow`).
3. **Event Tests**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≥–æ, —á—Ç–æ —Å–æ–±—ã—Ç–∏—è (beforeSave/afterSave) –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è.

> üßî —Ç–∞–∫–∂–µ –Ω–∞–º –Ω–∞–¥–æ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å, —á—Ç–æ–±—ã —Ç—ã –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–µ–¥–ª–∞–≥–∞–ª –º–Ω–µ –∫–∞–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ —Ñ–∞–π–ª —Ç–µ—Å—Ç–æ–≤. –≠—Ç–æ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å. –¢–µ–ø–µ—Ä—å, –¥–∞ –¥–∞–≤–∞–π –º–Ω–µ —Ç–µ—Å—Ç—ã –¥–ª—è tests/ai_guardrails –¥–ª—è SupabaseAdapter –∏ BaseEntity. –¢–∞–∫–∂–µ —è –±—ã —Ö–æ—Ç–µ–ª –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –∏–∑ —ç—Ç–æ–π –ø–∞–ø–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ –∫–∞–∫–æ–π –∫–æ–º–∞–Ω–¥–æ–π —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å?

–î–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å. –≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ (–ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–µ—Ç–æ–¥–æ–≤) —è —Ç–æ–∂–µ –∑–∞–ø–æ–º–Ω–∏–ª. –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç "–∂–∏–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é" –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—É—é —è –Ω–µ —Å–º–æ–≥—É –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å.

–í–æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `AI Guardrails` –¥–ª—è –ê–¥–∞–ø—Ç–µ—Ä–∞ –∏ –°—É—â–Ω–æ—Å—Ç–∏, –∞ —Ç–∞–∫–∂–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É.

### üöÄ –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ Guardrail-—Ç–µ—Å—Ç—ã

–¢—ã –º–æ–∂–µ—à—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏—Ö, —É–∫–∞–∑–∞–≤ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –≤ –∫–æ–º–∞–Ω–¥–µ vitest.

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–∞—è –∫–æ–º–∞–Ω–¥–∞**

```bash
npx vitest tests/ai_guardrails

```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –î–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ `package.json**`
(–†–µ–∫–æ–º–µ–Ω–¥—É—é —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç, —á—Ç–æ–±—ã –±—ã–ª–æ —É–¥–æ–±–Ω–æ)

```json
// package.json
"scripts": {
  "test": "vitest",
  "test:guard": "vitest run tests/ai_guardrails",
  "test:unit": "vitest run tests/unit",
  "test:integration": "vitest run tests/integration"
}

```

–¢–æ–≥–¥–∞ —Ç—ã —Å–º–æ–∂–µ—à—å –ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ: `npm run test:guard`.


---
### –°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤:
 * [BaseModel‚û°Ô∏è](./BASE_MODEL.md)
 * [SupabaseAdapter.md‚û°Ô∏è](./SUPABASE_ADAPTER.md)